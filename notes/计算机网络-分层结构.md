[[计算机网络]]

## 数据链路层-ARP（Address Resolution Protocol，地址解析协议）

IP地址：用于在网络层标识设备的逻辑地址，需要网络管理员或者DHCP服务器分配。

MAC地址：设备的唯一表示。

ARP协议：用于获取IP地址和MAC地址的映射。具体步骤：广播发送ARP请求，target ip相同的将自己的mac地址返回给消息的发起者。

## 网络层-ICMP（Internet Control Message Protocol，互联网控制消息协议）

ICMP协议主要发送两类消息。第一类是错误消息，如果数据发送过程中产生错误，那么有关错误的信息会封装在ICMP协议数据包中返回给发送者；第二类是控制信息消息，这类信息主要用于把当前网络状况传递给发送者，让发送者根据情况调整数据包的发送控制。

ICMP常见类型

| Type | 名称                    | 用途说明   | 典型场景                                                     |
| ---- | ----------------------- | ---------- | ------------------------------------------------------------ |
| 0    | Echo Reply              | 回显应答   | `ping` 命令的响应                                            |
| 3    | Destination Unreachable | 目标不可达 | 路由失败、端口关闭、网络不可达等                             |
| 5    | Redirect                | 重定向     | 路由器建议主机使用更优路径（虽较少见，但在某些网络中仍可能触发） |
| 8    | Echo Request            | 回显请求   | `ping` 命令的请求                                            |
| 11   | Time Exceeded           | 超时       | TTL 耗尽（用于 `traceroute`）                                |
| 12   | Parameter Problem       | 参数问题   | IP 头部字段错误                                              |

> 基于ICMP实现PING命令
>
> - **源主机**发送**ICMP Echo Request**。**目标主机**收到后，回复**ICMP Echo Reply**。
>
> - **源主机**收到回复后，计算从发送到接收的时间差，即为 **往返时间（Round-Trip Time, RTT）**。

>基于ICMP实现Traceroute
>
>- 利用**TTL**字段限制最大跳数,当TTL减为0时,路由器丢弃数据包,向源主机发送 **ICMP Time Exceeded**（超时）消息。
>- 通过**逐步增加 TTL 值**，使得数据包在每一跳被丢弃，从而获取每一跳路由器的 IP 地址。

## 传输层-

## 应用层-DHCP（Dynamic Host Configuration Protocol，动态主机配置协议）

DHCP（Dynamic Host Configuration Protocol）是一种用于**自动分配 IP 地址**及其他网络配置参数（如子网掩码、默认网关、DNS 服务器等）给网络主机的协议。它简化了网络管理，尤其适用于大型网络或频繁变动的设备。

> DHCP四步交互过程(DORA)
>
> - Discover（客户端 → 服务器）:客户端寻找可用的DHCP服务器(路由器或者中继代理)
>
> - Offer（服务器 → 客户端）:服务器响应客户端，提供一个可用的 IP 地址。(可能有多个服务器响应，客户端通常选择第一个 Offer。)
>
> - Request（客户端 → 服务器）:客户端正式请求使用某个 Offer 中的 IP。
>
> - Acknowledge（服务器 → 客户端）:服务器确认 IP 分配，完成配置。
>

## 应用层-DNS（Domain Name System，域名系统）

DNS用于域名到IP地址的转换.

>1. **域名空间（Domain Name Space）**
>   - 这是一个层次化的树状结构，用于组织和管理全球的域名。
>   - 顶级域（如 .com、.org、.cn）、二级域（如 example.com）以及子域都属于这个空间的一部分。
>   - 域名空间定义了域名的命名规则和层次结构。
>2. **域名服务器（Name Servers）**
>   - 负责存储域名与IP地址的映射信息，并响应DNS查询请求。
>   - 包括以下几类服务器：
>     - **根域名服务器（Root Servers）**：位于DNS层次结构的顶端，指引查询到正确的顶级域服务器。
>     - **顶级域名服务器（TLD Servers）**：管理特定顶级域（如 .com、.net）下的权威信息。
>     - **权威域名服务器（Authoritative Name Servers）**：保存特定域名的权威记录（如 example.com 的A记录、MX记录等）。
>     - **递归解析器（Recursive Resolvers）**：通常由ISP或公共DNS服务（如8.8.8.8）提供，代表客户端完成整个查询过程。
>3. **解析器（Resolvers）**
>   - 也称为DNS客户端，是发起DNS查询的程序或系统组件。
>   - 通常运行在用户设备或本地DNS服务器上，负责向域名服务器发送查询请求，并将结果返回给应用程序（如浏览器）。
>   - 解析器可以是**递归的**（代替客户端完成全部查询）或**迭代的**（只返回下一步应查询的服务器地址）。

## 应用层-HTTP（HyperText Transfer Protocol，超文本传输协议）

见[计算机网络-HTTP](.\计算机网络-HTTP.md)

